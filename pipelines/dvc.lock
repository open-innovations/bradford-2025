schema: '2.0'
stages:
  volunteers:
    cmd: papermill --no-log-output volunteers.ipynb output/volunteers.ipynb
    deps:
    - path: ../data/published/volunteers/checkpoints.csv
      hash: md5
      md5: b6dca740b55dbe45d935bf566e3235ad
      size: 21115
    - path: ../data/published/volunteers/shifts.csv
      hash: md5
      md5: 1027796d3b60d92c4ebccee4bec17f2c
      size: 45875
    - path: volunteers.ipynb
      hash: md5
      md5: 6becaebc8f5c7e0d74d6c069fa557984
      size: 8459
    outs:
    - path: ../src/themes/volunteers/_data/people/by_demographic_age_range.csv
      hash: md5
      md5: 8c52bd107b32a65ce0395f9bb6c6bf46
      size: 196
    - path: ../src/themes/volunteers/_data/people/by_geo_TOTAL.csv
      hash: md5
      md5: f957bcc44919f3a3dcc4f8aa38832412
      size: 54
    - path: ../src/themes/volunteers/_data/people/by_geo_oslaua.csv
      hash: md5
      md5: 350ba8ac932769c94e031a3e85ef645e
      size: 1128
    - path: ../src/themes/volunteers/_data/people/by_geo_osward.csv
      hash: md5
      md5: 22109889cf621ef31750a6206a681fb2
      size: 648
    - path: ../src/themes/volunteers/_data/people/by_geo_postcode_area.csv
      hash: md5
      md5: 4c7790b8f9e8c5ab6ef4f24fd7470a21
      size: 493
    - path: ../src/themes/volunteers/_data/people/checkpoints_weekly.csv
      hash: md5
      md5: 51156083adb353735853bd65e2af5ba9
      size: 1241
    - path: ../src/themes/volunteers/_data/shifts/attended_by_week.csv
      hash: md5
      md5: b54f984b5a852d5cdd70daf65330a166
      size: 897
    - path: ../src/themes/volunteers/_data/shifts/attended_cumulative_by_week.csv
      hash: md5
      md5: 75ad4cf777db1fb6e116516b08e8771c
      size: 1078
    - path: ../src/themes/volunteers/_data/shifts/hours_by_week.csv
      hash: md5
      md5: f842d727a04e31054161f39d68e2c720
      size: 1278
    - path: ../src/themes/volunteers/_data/shifts/hours_cumulative_by_week.csv
      hash: md5
      md5: f2b8f45c13be059760e29fabbef295e1
      size: 1549
  ticketing:
    cmd: papermill --no-log-output ticketing.ipynb output/ticketing.ipynb
    deps:
    - path: ../data/published/ticketing/orders.csv
      hash: md5
      md5: edd7dfa268445f433ec4d80b58f8c15c
      size: 3576
    - path: ../data/published/ticketing/tickets.csv
      hash: md5
      md5: 254744b438ced8ad40ac760e2a1faa48
      size: 2746046
    - path: ticketing.ipynb
      hash: md5
      md5: 18c8477182108f103e79a84b4f981d02
      size: 13341
    outs:
    - path: ../src/themes/ticketing/_data/operational
      hash: md5
      md5: 18e29c726b442a5fceb3029a2b1f3b5c.dir
      size: 9998
      nfiles: 7
  huq:
    cmd: papermill --no-log-output huq.ipynb output/huq.ipynb
    deps:
    - path: ../data/huq/mastercard.csv
      hash: md5
      md5: e9cb60195f153ef69e1336e7bece6b03
      size: 5386
    - path: huq.ipynb
      hash: md5
      md5: eecff663457e8fc6b5b3a2712cc79b4c
      size: 2506
    outs:
    - path: ../src/experiments/huq/_data/footfall_proxy.csv
      hash: md5
      md5: cc25008789841c4877040a29aea98ca0
      size: 512
    - path: ../src/experiments/huq/_data/spend_index.csv
      hash: md5
      md5: 7954811d3b3eb94a1a70fb764dd7fcad
      size: 512
  events@rise:
    cmd: papermill --no-log-output events.ipynb output/events.ipynb -p spektrix_event_ids
      '4801ANHPDLLRCQPPBDBQTRQJMPNKSLKPJ' -p venue_postcode 'BD1 1LA' -p rosterfy_event_ids
      '25890' -p project_id 'recf4tPyjoXi81NDo' -p id 'rise'
    deps:
    - path: ../data/published/ticketing/
      hash: md5
      md5: 4b3a4606e193444fdb3d6d8f7c919c14.dir
      size: 2912193
      nfiles: 3
    - path: events.ipynb
      hash: md5
      md5: d607da4680498cd8b5bd0876c1e68b12
      size: 3074
    outs:
    - path: ../src/events/rise/_data/event/
      hash: md5
      md5: 5fa40a9ea36ef750cbeddd0ee144260f.dir
      size: 17421
      nfiles: 6
  events@la-haine:
    cmd: papermill --no-log-output events.ipynb output/events.ipynb -p spektrix_event_ids
      '4001APBPRCSHVVMHTCBMSPSJRNDMCHHLV' -p venue_postcode 'BD1 1JT' -p rosterfy_event_ids
      '26307' -p project_id 'None' -p id 'la-haine'
    deps:
    - path: ../data/published/ticketing/
      hash: md5
      md5: 4b3a4606e193444fdb3d6d8f7c919c14.dir
      size: 2912193
      nfiles: 3
    - path: events.ipynb
      hash: md5
      md5: d607da4680498cd8b5bd0876c1e68b12
      size: 3074
    outs:
    - path: ../src/events/la-haine/_data/event/
      hash: md5
      md5: 26ddb3a05fcdd54beebda29ab907d739.dir
      size: 6820
      nfiles: 4
  events@les-girafes:
    cmd: papermill --no-log-output events.ipynb output/events.ipynb -p spektrix_event_ids
      'recu2QievPdxr1dnH' -p venue_postcode 'BD1 1LA' -p rosterfy_event_ids '24438'
      -p project_id 'None' -p id 'les-girafes'
    deps:
    - path: ../data/published/ticketing/
      hash: md5
      md5: 4b3a4606e193444fdb3d6d8f7c919c14.dir
      size: 2912193
      nfiles: 3
    - path: events.ipynb
      hash: md5
      md5: d607da4680498cd8b5bd0876c1e68b12
      size: 3074
    outs:
    - path: ../src/events/les-girafes/_data/event/
      hash: md5
      md5: a2c65636be9b573c5b948ac1fee8f8d5.dir
      size: 215
      nfiles: 4
  sustainability:
    cmd: jupyter execute sustainability.ipynb
    deps:
    - path: ../data/published/sustainability/calculations.csv
      hash: md5
      md5: afb33da8f7886c0e73f5787b68c9da79
      size: 35106
    - path: sustainability.ipynb
      hash: md5
      md5: 1bd13e187287e96b65faba4969e915bf
      size: 3364
    outs:
    - path: ../src/themes/sustainability/_data/calculations/
      hash: md5
      md5: f20709a5767e28ce9091bd8a6f2654bd.dir
      size: 175
      nfiles: 2
  events@grue:
    cmd: papermill --no-log-output events.ipynb output/events.ipynb -p spektrix_event_ids
      '7601AHCJPTHNBCVJHLQNKQVKDRKRMLTPC' -p venue_postcode 'None' -p rosterfy_event_ids
      '26540' -p project_id 'recpLG4BaPUSjpEhJ' -p id 'grue'
    deps:
    - path: ../data/published/ticketing/
      hash: md5
      md5: 4b3a4606e193444fdb3d6d8f7c919c14.dir
      size: 2912193
      nfiles: 3
    - path: events.ipynb
      hash: md5
      md5: d607da4680498cd8b5bd0876c1e68b12
      size: 3074
    outs:
    - path: ../src/events/grue/_data/event/
      hash: md5
      md5: ff3e6dccf56b600331f8b9f476bdca8a.dir
      size: 60364
      nfiles: 6
  dashboards@live:
    cmd: papermill --no-log-output dashboard.ipynb - -p target '' -p start '2025-01-01'
      -p end '2025-12-31' -p fixed_date 'false'
    deps:
    - path: ../data/published/
      hash: md5
      md5: b71d7621fa8e75e513ebf34c8579d481.dir
      size: 3645047
      nfiles: 11
    - path: dashboard.ipynb
      hash: md5
      md5: b6bc7dedcc06ba10c1cabdfac1770fca
      size: 16265
    outs:
    - path: ../src/insights/dashboard//_data/events.json
      hash: md5
      md5: e5a486fddd6d9d622b3f8ccd431ef89e
      size: 3347
    - path: ../src/insights/dashboard//_data/tickets.json
      hash: md5
      md5: 47b83c5262ec11913b3a12697a6d4444
      size: 1631
    - path: ../src/insights/dashboard//_data/timestamp.json
      hash: md5
      md5: 83037fc2c2d5501f10b1a624f41442e5
      size: 69
    - path: ../src/insights/dashboard//_data/volunteers.json
      hash: md5
      md5: e9eede24c1a9aff280b59300039627a1
      size: 1794
  dashboards@q1:
    cmd: papermill --no-log-output dashboard.ipynb - -p target 'q1' -p start '2025-01-01'
      -p end '2025-03-31' -p fixed_date 'true'
    deps:
    - path: ../data/published/
      hash: md5
      md5: b71d7621fa8e75e513ebf34c8579d481.dir
      size: 3645047
      nfiles: 11
    - path: dashboard.ipynb
      hash: md5
      md5: b6bc7dedcc06ba10c1cabdfac1770fca
      size: 16265
    outs:
    - path: ../src/insights/dashboard/q1/_data/events.json
      hash: md5
      md5: 089325ffb04e042d7c0d54ac399bae39
      size: 2992
    - path: ../src/insights/dashboard/q1/_data/tickets.json
      hash: md5
      md5: 2db5de92417de14e499912f4a70db155
      size: 996
    - path: ../src/insights/dashboard/q1/_data/timestamp.json
      hash: md5
      md5: 4ea44d87cc190ae9adc1e5a53b6c2d01
      size: 69
    - path: ../src/insights/dashboard/q1/_data/volunteers.json
      hash: md5
      md5: c0a4c0724935265a0dc66d41faa7e322
      size: 1614
  events@dracula:
    cmd: papermill --no-log-output events.ipynb output/events.ipynb -p spektrix_event_ids
      '9001AGHDBMPJDRPSRMKLRCJGBJJMTQGDH' -p venue_postcode 'None' -p rosterfy_event_ids
      'None' -p project_id 'None' -p id 'dracula'
    deps:
    - path: ../data/published/ticketing/
      hash: md5
      md5: 4b3a4606e193444fdb3d6d8f7c919c14.dir
      size: 2912193
      nfiles: 3
    - path: events.ipynb
      hash: md5
      md5: d607da4680498cd8b5bd0876c1e68b12
      size: 3074
    outs:
    - path: ../src/events/dracula/_data/event/
      hash: md5
      md5: 9a1ba9a4991d61dc08d6063c14f0b19d.dir
      size: 11244
      nfiles: 3
  dashboards@q2:
    cmd: papermill --no-log-output dashboard.ipynb - -p target 'q2' -p start '2025-04-01'
      -p end '2025-06-30' -p fixed_date 'true'
    deps:
    - path: ../data/published/
      hash: md5
      md5: b71d7621fa8e75e513ebf34c8579d481.dir
      size: 3645047
      nfiles: 11
    - path: dashboard.ipynb
      hash: md5
      md5: b6bc7dedcc06ba10c1cabdfac1770fca
      size: 16265
    outs:
    - path: ../src/insights/dashboard/q2/_data/events.json
      hash: md5
      md5: 3d5b3ba3214f143cd4d99d7b176e48a4
      size: 4450
    - path: ../src/insights/dashboard/q2/_data/tickets.json
      hash: md5
      md5: e7af55dd0e796b114a5c6becb1408555
      size: 2854
    - path: ../src/insights/dashboard/q2/_data/timestamp.json
      hash: md5
      md5: 26e940db080f5464225b002db7467e88
      size: 69
    - path: ../src/insights/dashboard/q2/_data/volunteers.json
      hash: md5
      md5: 0305e611737c0ac620fcdcda05388e9b
      size: 604
  dashboards@all:
    cmd: papermill --no-log-output dashboard.ipynb - -p target 'all' -p start '2024-01-01'
      -p end '2025-12-31' -p fixed_date 'false'
    deps:
    - path: ../data/published/
      hash: md5
      md5: b71d7621fa8e75e513ebf34c8579d481.dir
      size: 3645047
      nfiles: 11
    - path: dashboard.ipynb
      hash: md5
      md5: b6bc7dedcc06ba10c1cabdfac1770fca
      size: 16265
    outs:
    - path: ../src/insights/dashboard/all/_data/events.json
      hash: md5
      md5: 3e17cb5b892c2fd551434bff4fa14e9b
      size: 3706
    - path: ../src/insights/dashboard/all/_data/tickets.json
      hash: md5
      md5: 07a2f61e05fc82be6d82170beb79f980
      size: 1631
    - path: ../src/insights/dashboard/all/_data/timestamp.json
      hash: md5
      md5: 220b3e605303e9f5f750ce85f36688d4
      size: 69
    - path: ../src/insights/dashboard/all/_data/volunteers.json
      hash: md5
      md5: 07c70d4042ea8cf5852ce1c8267a1b8f
      size: 2224
  programme:
    cmd: jupyter execute programme.ipynb
    deps:
    - path: ../data/published/programme/events.csv
      hash: md5
      md5: f8f9043859f5b41a71baf0f8eb74b852
      size: 599380
    - path: programme.ipynb
      hash: md5
      md5: 572720f7552cbb98f3dc966dda2d2057
      size: 3621
    outs:
    - path: ../src/themes/programme/_data/events/
      hash: md5
      md5: dacff673b1ef6dbbc326914190bb2f08.dir
      size: 3627
      nfiles: 4
