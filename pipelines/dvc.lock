schema: '2.0'
stages:
  volunteers:
    cmd: papermill --no-log-output volunteers.ipynb output/volunteers.ipynb
    deps:
    - path: ../data/published/volunteers/checkpoints.csv
      hash: md5
      md5: 390e6a2bff727a7bde7492037581db39
      size: 20992
    - path: ../data/published/volunteers/shifts.csv
      hash: md5
      md5: 3acd79ae62492d5c04f9a2c0c5206333
      size: 45535
    - path: volunteers.ipynb
      hash: md5
      md5: 6becaebc8f5c7e0d74d6c069fa557984
      size: 8459
    outs:
    - path: ../src/themes/volunteers/_data/people/by_demographic_age_range.csv
      hash: md5
      md5: f9e5fdb57cbb83aca63804bd3e38ec8b
      size: 196
    - path: ../src/themes/volunteers/_data/people/by_geo_TOTAL.csv
      hash: md5
      md5: c0a89596c933f9cc15973e1baf1ad5d2
      size: 54
    - path: ../src/themes/volunteers/_data/people/by_geo_oslaua.csv
      hash: md5
      md5: d5d196205c614d3bb293f3314645d682
      size: 1128
    - path: ../src/themes/volunteers/_data/people/by_geo_osward.csv
      hash: md5
      md5: a48e1a5511d642cc5c1a61e2d3534cd4
      size: 648
    - path: ../src/themes/volunteers/_data/people/by_geo_postcode_area.csv
      hash: md5
      md5: 9f5af0cb5fbd97dbe685c4b7b146439d
      size: 493
    - path: ../src/themes/volunteers/_data/people/checkpoints_weekly.csv
      hash: md5
      md5: 0c6eca78fbbca429d68d5d47476522f7
      size: 1240
    - path: ../src/themes/volunteers/_data/shifts/attended_by_week.csv
      hash: md5
      md5: 962b1d2eccc58eee3b1f10972418aec8
      size: 897
    - path: ../src/themes/volunteers/_data/shifts/attended_cumulative_by_week.csv
      hash: md5
      md5: c626045605ccaf7534b3f5536b71cab8
      size: 1078
    - path: ../src/themes/volunteers/_data/shifts/hours_by_week.csv
      hash: md5
      md5: 52e2312b5a00f6c127ca4cc3541279a8
      size: 1278
    - path: ../src/themes/volunteers/_data/shifts/hours_cumulative_by_week.csv
      hash: md5
      md5: 38a2d58b8fc1e0437f4a2928f20fe416
      size: 1549
  ticketing:
    cmd: papermill --no-log-output ticketing.ipynb output/ticketing.ipynb
    deps:
    - path: ../data/published/ticketing/orders.csv
      hash: md5
      md5: 006e8466cff636c83fc484fcdc4e437c
      size: 3560
    - path: ../data/published/ticketing/tickets.csv
      hash: md5
      md5: 9315c3fe31b251101a367805fa2a9ae1
      size: 2710947
    - path: ticketing.ipynb
      hash: md5
      md5: 18c8477182108f103e79a84b4f981d02
      size: 13341
    outs:
    - path: ../src/themes/ticketing/_data/operational
      hash: md5
      md5: 6525fec6b620ee9fa9522b9bb9b7a0f3.dir
      size: 9980
      nfiles: 7
  huq:
    cmd: papermill --no-log-output huq.ipynb output/huq.ipynb
    deps:
    - path: ../data/huq/mastercard.csv
      hash: md5
      md5: e9cb60195f153ef69e1336e7bece6b03
      size: 5386
    - path: huq.ipynb
      hash: md5
      md5: eecff663457e8fc6b5b3a2712cc79b4c
      size: 2506
    outs:
    - path: ../src/experiments/huq/_data/footfall_proxy.csv
      hash: md5
      md5: cc25008789841c4877040a29aea98ca0
      size: 512
    - path: ../src/experiments/huq/_data/spend_index.csv
      hash: md5
      md5: 7954811d3b3eb94a1a70fb764dd7fcad
      size: 512
  events@rise:
    cmd: papermill --no-log-output events.ipynb output/events.ipynb -p spektrix_event_ids
      '4801ANHPDLLRCQPPBDBQTRQJMPNKSLKPJ' -p venue_postcode 'BD1 1LA' -p rosterfy_event_ids
      '25890' -p project_id 'recf4tPyjoXi81NDo' -p id 'rise'
    deps:
    - path: ../data/published/ticketing/
      hash: md5
      md5: bfb003700e78f1f0bd246bb4f5ba13e6.dir
      size: 2877078
      nfiles: 3
    - path: events.ipynb
      hash: md5
      md5: d607da4680498cd8b5bd0876c1e68b12
      size: 3074
    outs:
    - path: ../src/events/rise/_data/event/
      hash: md5
      md5: 5fa40a9ea36ef750cbeddd0ee144260f.dir
      size: 17421
      nfiles: 6
  events@la-haine:
    cmd: papermill --no-log-output events.ipynb output/events.ipynb -p spektrix_event_ids
      '4001APBPRCSHVVMHTCBMSPSJRNDMCHHLV' -p venue_postcode 'BD1 1JT' -p rosterfy_event_ids
      '26307' -p project_id 'None' -p id 'la-haine'
    deps:
    - path: ../data/published/ticketing/
      hash: md5
      md5: bfb003700e78f1f0bd246bb4f5ba13e6.dir
      size: 2877078
      nfiles: 3
    - path: events.ipynb
      hash: md5
      md5: d607da4680498cd8b5bd0876c1e68b12
      size: 3074
    outs:
    - path: ../src/events/la-haine/_data/event/
      hash: md5
      md5: 26ddb3a05fcdd54beebda29ab907d739.dir
      size: 6820
      nfiles: 4
  events@les-girafes:
    cmd: papermill --no-log-output events.ipynb output/events.ipynb -p spektrix_event_ids
      'recu2QievPdxr1dnH' -p venue_postcode 'BD1 1LA' -p rosterfy_event_ids '24438'
      -p project_id 'None' -p id 'les-girafes'
    deps:
    - path: ../data/published/ticketing/
      hash: md5
      md5: bfb003700e78f1f0bd246bb4f5ba13e6.dir
      size: 2877078
      nfiles: 3
    - path: events.ipynb
      hash: md5
      md5: d607da4680498cd8b5bd0876c1e68b12
      size: 3074
    outs:
    - path: ../src/events/les-girafes/_data/event/
      hash: md5
      md5: a2c65636be9b573c5b948ac1fee8f8d5.dir
      size: 215
      nfiles: 4
  sustainability:
    cmd: jupyter execute sustainability.ipynb
    deps:
    - path: ../data/published/sustainability/calculations.csv
      hash: md5
      md5: afb33da8f7886c0e73f5787b68c9da79
      size: 35106
    - path: sustainability.ipynb
      hash: md5
      md5: 1bd13e187287e96b65faba4969e915bf
      size: 3364
    outs:
    - path: ../src/themes/sustainability/_data/calculations/
      hash: md5
      md5: f20709a5767e28ce9091bd8a6f2654bd.dir
      size: 175
      nfiles: 2
  events@grue:
    cmd: papermill --no-log-output events.ipynb output/events.ipynb -p spektrix_event_ids
      '7601AHCJPTHNBCVJHLQNKQVKDRKRMLTPC' -p venue_postcode 'None' -p rosterfy_event_ids
      '26540' -p project_id 'recpLG4BaPUSjpEhJ' -p id 'grue'
    deps:
    - path: ../data/published/ticketing/
      hash: md5
      md5: bfb003700e78f1f0bd246bb4f5ba13e6.dir
      size: 2877078
      nfiles: 3
    - path: events.ipynb
      hash: md5
      md5: d607da4680498cd8b5bd0876c1e68b12
      size: 3074
    outs:
    - path: ../src/events/grue/_data/event/
      hash: md5
      md5: ff3e6dccf56b600331f8b9f476bdca8a.dir
      size: 60364
      nfiles: 6
  dashboards@live:
    cmd: papermill --no-log-output dashboard.ipynb - -p target '' -p start '2025-01-01'
      -p end '2025-12-31' -p fixed_date 'false'
    deps:
    - path: ../data/published/
      hash: md5
      md5: 47c9584bcffcf76588bc644c560237ae.dir
      size: 3585221
      nfiles: 11
    - path: dashboard.ipynb
      hash: md5
      md5: b6bc7dedcc06ba10c1cabdfac1770fca
      size: 16265
    outs:
    - path: ../src/insights/dashboard//_data/events.json
      hash: md5
      md5: 1283b136dfef6a0c88d7952121f52169
      size: 3314
    - path: ../src/insights/dashboard//_data/tickets.json
      hash: md5
      md5: 65b3d54a6efb3a2a556f69626e9851c4
      size: 1616
    - path: ../src/insights/dashboard//_data/timestamp.json
      hash: md5
      md5: 4f40872889a8d0ab8eeb7673f7bf610e
      size: 69
    - path: ../src/insights/dashboard//_data/volunteers.json
      hash: md5
      md5: 858a8284b29731960aeb160a50786c93
      size: 1794
  dashboards@q1:
    cmd: papermill --no-log-output dashboard.ipynb - -p target 'q1' -p start '2025-01-01'
      -p end '2025-03-31' -p fixed_date 'true'
    deps:
    - path: ../data/published/
      hash: md5
      md5: 47c9584bcffcf76588bc644c560237ae.dir
      size: 3585221
      nfiles: 11
    - path: dashboard.ipynb
      hash: md5
      md5: b6bc7dedcc06ba10c1cabdfac1770fca
      size: 16265
    outs:
    - path: ../src/insights/dashboard/q1/_data/events.json
      hash: md5
      md5: fdc35d1723e0fb5a8060a3090a695611
      size: 2959
    - path: ../src/insights/dashboard/q1/_data/tickets.json
      hash: md5
      md5: e96a04437c99a4178a9e20af082f8fb3
      size: 996
    - path: ../src/insights/dashboard/q1/_data/timestamp.json
      hash: md5
      md5: e48d4e2208375611a38a130dd83fb4c4
      size: 69
    - path: ../src/insights/dashboard/q1/_data/volunteers.json
      hash: md5
      md5: c0a4c0724935265a0dc66d41faa7e322
      size: 1614
  events@dracula:
    cmd: papermill --no-log-output events.ipynb output/events.ipynb -p spektrix_event_ids
      '9001AGHDBMPJDRPSRMKLRCJGBJJMTQGDH' -p venue_postcode 'None' -p rosterfy_event_ids
      'None' -p project_id 'None' -p id 'dracula'
    deps:
    - path: ../data/published/ticketing/
      hash: md5
      md5: bfb003700e78f1f0bd246bb4f5ba13e6.dir
      size: 2877078
      nfiles: 3
    - path: events.ipynb
      hash: md5
      md5: d607da4680498cd8b5bd0876c1e68b12
      size: 3074
    outs:
    - path: ../src/events/dracula/_data/event/
      hash: md5
      md5: 9a1ba9a4991d61dc08d6063c14f0b19d.dir
      size: 11244
      nfiles: 3
  dashboards@q2:
    cmd: papermill --no-log-output dashboard.ipynb - -p target 'q2' -p start '2025-04-01'
      -p end '2025-06-30' -p fixed_date 'true'
    deps:
    - path: ../data/published/
      hash: md5
      md5: 47c9584bcffcf76588bc644c560237ae.dir
      size: 3585221
      nfiles: 11
    - path: dashboard.ipynb
      hash: md5
      md5: b6bc7dedcc06ba10c1cabdfac1770fca
      size: 16265
    outs:
    - path: ../src/insights/dashboard/q2/_data/events.json
      hash: md5
      md5: 4b15d42f8c00ef08c57de2031bb8da8c
      size: 4368
    - path: ../src/insights/dashboard/q2/_data/tickets.json
      hash: md5
      md5: 9150cc5440aaac192a530d0a3a68dd76
      size: 2854
    - path: ../src/insights/dashboard/q2/_data/timestamp.json
      hash: md5
      md5: 8a61b641f131f8e352fa46160089df61
      size: 69
    - path: ../src/insights/dashboard/q2/_data/volunteers.json
      hash: md5
      md5: 2204a8c310032200ac6af08a3c8298b5
      size: 604
  dashboards@all:
    cmd: papermill --no-log-output dashboard.ipynb - -p target 'all' -p start '2024-01-01'
      -p end '2025-12-31' -p fixed_date 'false'
    deps:
    - path: ../data/published/
      hash: md5
      md5: 47c9584bcffcf76588bc644c560237ae.dir
      size: 3585221
      nfiles: 11
    - path: dashboard.ipynb
      hash: md5
      md5: b6bc7dedcc06ba10c1cabdfac1770fca
      size: 16265
    outs:
    - path: ../src/insights/dashboard/all/_data/events.json
      hash: md5
      md5: 60d08c7d6ef053879d38b999f2f2cbfb
      size: 3670
    - path: ../src/insights/dashboard/all/_data/tickets.json
      hash: md5
      md5: d027616759dc07f63caa842a5d885a76
      size: 1616
    - path: ../src/insights/dashboard/all/_data/timestamp.json
      hash: md5
      md5: de34fa6bafe383179cb722c9c08f0978
      size: 69
    - path: ../src/insights/dashboard/all/_data/volunteers.json
      hash: md5
      md5: 12ad6e383a20134c59f49b521e89397b
      size: 2224
  programme:
    cmd: jupyter execute programme.ipynb
    deps:
    - path: ../data/published/programme/events.csv
      hash: md5
      md5: 5c9c8e1554d9e395ed9fb07b780775a4
      size: 575797
    - path: programme.ipynb
      hash: md5
      md5: 572720f7552cbb98f3dc966dda2d2057
      size: 3621
    outs:
    - path: ../src/themes/programme/_data/events/
      hash: md5
      md5: 91ea591237ec0ca5f597e8fda5335cef.dir
      size: 3627
      nfiles: 4
