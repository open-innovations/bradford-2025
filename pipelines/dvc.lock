schema: '2.0'
stages:
  volunteers:
    cmd: papermill --no-log-output volunteers.ipynb output/volunteers.ipynb
    deps:
    - path: ../data/published/volunteers/checkpoints.csv
      hash: md5
      md5: 4805f143635c81614234599c00ca3981
      size: 20913
    - path: ../data/published/volunteers/shifts.csv
      hash: md5
      md5: 4db28ea92f481f5baf1dfca9e8685aef
      size: 45260
    - path: volunteers.ipynb
      hash: md5
      md5: 6becaebc8f5c7e0d74d6c069fa557984
      size: 8459
    outs:
    - path: ../src/themes/volunteers/_data/people/by_demographic_age_range.csv
      hash: md5
      md5: 0b669c15a3d3dc13eb9b4803b1eb194f
      size: 196
    - path: ../src/themes/volunteers/_data/people/by_geo_TOTAL.csv
      hash: md5
      md5: cc04ffb2ab472905cdb1c46fd86f9a30
      size: 54
    - path: ../src/themes/volunteers/_data/people/by_geo_oslaua.csv
      hash: md5
      md5: 6fde8f2c74eabe842c4c8dd964a41891
      size: 741
    - path: ../src/themes/volunteers/_data/people/by_geo_osward.csv
      hash: md5
      md5: 58d2cfb498646cb6bff8e66fe41a6fe1
      size: 648
    - path: ../src/themes/volunteers/_data/people/by_geo_postcode_area.csv
      hash: md5
      md5: c9c806ce4bed32df19bd0d34ce0469a7
      size: 493
    - path: ../src/themes/volunteers/_data/people/checkpoints_weekly.csv
      hash: md5
      md5: 6f389069149a1d40951ac0851274c4c0
      size: 1208
    - path: ../src/themes/volunteers/_data/shifts/attended_by_week.csv
      hash: md5
      md5: b0ed7c67401059a915e14d96889a87b5
      size: 874
    - path: ../src/themes/volunteers/_data/shifts/attended_cumulative_by_week.csv
      hash: md5
      md5: 60b3af74cdbf6ffbb65b5efa0768ad93
      size: 1047
    - path: ../src/themes/volunteers/_data/shifts/hours_by_week.csv
      hash: md5
      md5: 4f681454e8b5520035b42ef7356b0088
      size: 1245
    - path: ../src/themes/volunteers/_data/shifts/hours_cumulative_by_week.csv
      hash: md5
      md5: 2b1860dfda2ac2915cd039ac5e3363d9
      size: 1504
  ticketing:
    cmd: papermill --no-log-output ticketing.ipynb output/ticketing.ipynb
    deps:
    - path: ../data/published/ticketing/orders.csv
      hash: md5
      md5: d567f9a551c476f8ad7c8906331c7186
      size: 3544
    - path: ../data/published/ticketing/tickets.csv
      hash: md5
      md5: b2dcdae20741c09f8b146840e149911b
      size: 2677879
    - path: ticketing.ipynb
      hash: md5
      md5: 18c8477182108f103e79a84b4f981d02
      size: 13341
    outs:
    - path: ../src/themes/ticketing/_data/operational
      hash: md5
      md5: d643d6a8c56577e4c7ec108140c7a795.dir
      size: 9885
      nfiles: 7
  huq:
    cmd: papermill --no-log-output huq.ipynb output/huq.ipynb
    deps:
    - path: ../data/huq/mastercard.csv
      hash: md5
      md5: e9cb60195f153ef69e1336e7bece6b03
      size: 5386
    - path: huq.ipynb
      hash: md5
      md5: eecff663457e8fc6b5b3a2712cc79b4c
      size: 2506
    outs:
    - path: ../src/experiments/huq/_data/footfall_proxy.csv
      hash: md5
      md5: cc25008789841c4877040a29aea98ca0
      size: 512
    - path: ../src/experiments/huq/_data/spend_index.csv
      hash: md5
      md5: 7954811d3b3eb94a1a70fb764dd7fcad
      size: 512
  events@rise:
    cmd: papermill --no-log-output events.ipynb output/events.ipynb -p spektrix_event_ids
      '4801ANHPDLLRCQPPBDBQTRQJMPNKSLKPJ' -p venue_postcode 'BD1 1LA' -p rosterfy_event_ids
      '25890' -p project_id 'recf4tPyjoXi81NDo' -p id 'rise'
    deps:
    - path: ../data/published/ticketing/
      hash: md5
      md5: 7d0ea6daa924951179435e41873194fd.dir
      size: 2837118
      nfiles: 3
    - path: events.ipynb
      hash: md5
      md5: d607da4680498cd8b5bd0876c1e68b12
      size: 3074
    outs:
    - path: ../src/events/rise/_data/event/
      hash: md5
      md5: 5fa40a9ea36ef750cbeddd0ee144260f.dir
      size: 17421
      nfiles: 6
  events@la-haine:
    cmd: papermill --no-log-output events.ipynb output/events.ipynb -p spektrix_event_ids
      '4001APBPRCSHVVMHTCBMSPSJRNDMCHHLV' -p venue_postcode 'BD1 1JT' -p rosterfy_event_ids
      '26307' -p project_id 'None' -p id 'la-haine'
    deps:
    - path: ../data/published/ticketing/
      hash: md5
      md5: 7d0ea6daa924951179435e41873194fd.dir
      size: 2837118
      nfiles: 3
    - path: events.ipynb
      hash: md5
      md5: d607da4680498cd8b5bd0876c1e68b12
      size: 3074
    outs:
    - path: ../src/events/la-haine/_data/event/
      hash: md5
      md5: 26ddb3a05fcdd54beebda29ab907d739.dir
      size: 6820
      nfiles: 4
  events@les-girafes:
    cmd: papermill --no-log-output events.ipynb output/events.ipynb -p spektrix_event_ids
      'recu2QievPdxr1dnH' -p venue_postcode 'BD1 1LA' -p rosterfy_event_ids '24438'
      -p project_id 'None' -p id 'les-girafes'
    deps:
    - path: ../data/published/ticketing/
      hash: md5
      md5: 7d0ea6daa924951179435e41873194fd.dir
      size: 2837118
      nfiles: 3
    - path: events.ipynb
      hash: md5
      md5: d607da4680498cd8b5bd0876c1e68b12
      size: 3074
    outs:
    - path: ../src/events/les-girafes/_data/event/
      hash: md5
      md5: a2c65636be9b573c5b948ac1fee8f8d5.dir
      size: 215
      nfiles: 4
  sustainability:
    cmd: jupyter execute sustainability.ipynb
    deps:
    - path: ../data/published/sustainability/calculations.csv
      hash: md5
      md5: dcce6519352ab440465413a85cd311d5
      size: 33593
    - path: sustainability.ipynb
      hash: md5
      md5: 1bd13e187287e96b65faba4969e915bf
      size: 3364
    outs:
    - path: ../src/themes/sustainability/_data/calculations/
      hash: md5
      md5: 251b0382d8b850a0d7a11f12cf599556.dir
      size: 174
      nfiles: 2
  events@grue:
    cmd: papermill --no-log-output events.ipynb output/events.ipynb -p spektrix_event_ids
      '7601AHCJPTHNBCVJHLQNKQVKDRKRMLTPC' -p venue_postcode 'None' -p rosterfy_event_ids
      '26540' -p project_id 'recpLG4BaPUSjpEhJ' -p id 'grue'
    deps:
    - path: ../data/published/ticketing/
      hash: md5
      md5: 7d0ea6daa924951179435e41873194fd.dir
      size: 2837118
      nfiles: 3
    - path: events.ipynb
      hash: md5
      md5: d607da4680498cd8b5bd0876c1e68b12
      size: 3074
    outs:
    - path: ../src/events/grue/_data/event/
      hash: md5
      md5: ff3e6dccf56b600331f8b9f476bdca8a.dir
      size: 60364
      nfiles: 6
  dashboards@live:
    cmd: papermill --no-log-output dashboard.ipynb - -p target '' -p start '2025-01-01'
      -p end '2025-12-31' -p fixed_date 'false'
    deps:
    - path: ../data/published/
      hash: md5
      md5: 81c0a799b6fd3a8d019f0aa870ad0f77.dir
      size: 3544137
      nfiles: 11
    - path: dashboard.ipynb
      hash: md5
      md5: 6ca2d4a13e239959904796e5a74a2274
      size: 16265
    outs:
    - path: ../src/insights/dashboard//_data/events.json
      hash: md5
      md5: 59d7b13fffd5d2e24fd550a609fcdf67
      size: 3314
    - path: ../src/insights/dashboard//_data/tickets.json
      hash: md5
      md5: 1431820dddf90a3ed6ecf14c91aeb4a3
      size: 1616
    - path: ../src/insights/dashboard//_data/timestamp.json
      hash: md5
      md5: b501599c1b387ead34784173377f1533
      size: 69
    - path: ../src/insights/dashboard//_data/volunteers.json
      hash: md5
      md5: c8afe9daf5489c6590ad7ada19a103ca
      size: 1794
  dashboards@q1:
    cmd: papermill --no-log-output dashboard.ipynb - -p target 'q1' -p start '2025-01-01'
      -p end '2025-03-31' -p fixed_date 'true'
    deps:
    - path: ../data/published/
      hash: md5
      md5: 81c0a799b6fd3a8d019f0aa870ad0f77.dir
      size: 3544137
      nfiles: 11
    - path: dashboard.ipynb
      hash: md5
      md5: 6ca2d4a13e239959904796e5a74a2274
      size: 16265
    outs:
    - path: ../src/insights/dashboard/q1/_data/events.json
      hash: md5
      md5: fdc35d1723e0fb5a8060a3090a695611
      size: 2959
    - path: ../src/insights/dashboard/q1/_data/tickets.json
      hash: md5
      md5: e96a04437c99a4178a9e20af082f8fb3
      size: 996
    - path: ../src/insights/dashboard/q1/_data/timestamp.json
      hash: md5
      md5: 109be3c1b614409de4ab5375f79bdc60
      size: 69
    - path: ../src/insights/dashboard/q1/_data/volunteers.json
      hash: md5
      md5: c0a4c0724935265a0dc66d41faa7e322
      size: 1614
  events@dracula:
    cmd: papermill --no-log-output events.ipynb output/events.ipynb -p spektrix_event_ids
      '9001AGHDBMPJDRPSRMKLRCJGBJJMTQGDH' -p venue_postcode 'None' -p rosterfy_event_ids
      'None' -p project_id 'None' -p id 'dracula'
    deps:
    - path: ../data/published/ticketing/
      hash: md5
      md5: 7d0ea6daa924951179435e41873194fd.dir
      size: 2837118
      nfiles: 3
    - path: events.ipynb
      hash: md5
      md5: d607da4680498cd8b5bd0876c1e68b12
      size: 3074
    outs:
    - path: ../src/events/dracula/_data/event/
      hash: md5
      md5: 9a1ba9a4991d61dc08d6063c14f0b19d.dir
      size: 11244
      nfiles: 3
  dashboards@q2:
    cmd: papermill --no-log-output dashboard.ipynb - -p target 'q2' -p start '2025-04-01'
      -p end '2025-06-30' -p fixed_date 'true'
    deps:
    - path: ../data/published/
      hash: md5
      md5: 81c0a799b6fd3a8d019f0aa870ad0f77.dir
      size: 3544137
      nfiles: 11
    - path: dashboard.ipynb
      hash: md5
      md5: 6ca2d4a13e239959904796e5a74a2274
      size: 16265
    outs:
    - path: ../src/insights/dashboard/q2/_data/events.json
      hash: md5
      md5: 4b15d42f8c00ef08c57de2031bb8da8c
      size: 4368
    - path: ../src/insights/dashboard/q2/_data/tickets.json
      hash: md5
      md5: 02e14d30068de5eedfb7f942f992d96d
      size: 2842
    - path: ../src/insights/dashboard/q2/_data/timestamp.json
      hash: md5
      md5: daa9d22bba1e5e2d49b7b6206178e648
      size: 69
    - path: ../src/insights/dashboard/q2/_data/volunteers.json
      hash: md5
      md5: 8c95e169a6f885979a6d2e1d79828778
      size: 604
  dashboards@all:
    cmd: papermill --no-log-output dashboard.ipynb - -p target 'all' -p start '2024-01-01'
      -p end '2025-12-31' -p fixed_date 'false'
    deps:
    - path: ../data/published/
      hash: md5
      md5: 81c0a799b6fd3a8d019f0aa870ad0f77.dir
      size: 3544137
      nfiles: 11
    - path: dashboard.ipynb
      hash: md5
      md5: 6ca2d4a13e239959904796e5a74a2274
      size: 16265
    outs:
    - path: ../src/insights/dashboard/all/_data/events.json
      hash: md5
      md5: ecbf0e5fbd4736b4a1adc90813091a86
      size: 3670
    - path: ../src/insights/dashboard/all/_data/tickets.json
      hash: md5
      md5: d7db195dcf7b8227808da65bf71d7730
      size: 1616
    - path: ../src/insights/dashboard/all/_data/timestamp.json
      hash: md5
      md5: f6c74e5df0c5ab760cc36f055613b645
      size: 69
    - path: ../src/insights/dashboard/all/_data/volunteers.json
      hash: md5
      md5: acb355c4be67bb3b40059cb73d9a4c1f
      size: 2224
  programme:
    cmd: jupyter execute programme.ipynb
    deps:
    - path: ../data/published/programme/events.csv
      hash: md5
      md5: 6f79ad637dfcd4788b0c210e75125bac
      size: 576927
    - path: programme.ipynb
      hash: md5
      md5: 572720f7552cbb98f3dc966dda2d2057
      size: 3621
    outs:
    - path: ../src/themes/programme/_data/events/
      hash: md5
      md5: 24518bcbe8ae20ec472099297197a7d8.dir
      size: 3626
      nfiles: 4
