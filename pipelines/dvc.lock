schema: '2.0'
stages:
  volunteers:
    cmd: papermill --no-log-output volunteers.ipynb output/volunteers.ipynb
    deps:
    - path: ../data/published/volunteers/checkpoints.csv
      hash: md5
      md5: d77ed1fad4cf647cf7b3fa5e1d1e8227
      size: 20632
    - path: ../data/published/volunteers/shifts.csv
      hash: md5
      md5: 34321c9bdee3e94955e4166c4210b2ee
      size: 42661
    - path: volunteers.ipynb
      hash: md5
      md5: 6becaebc8f5c7e0d74d6c069fa557984
      size: 8459
    outs:
    - path: ../src/themes/volunteers/_data/people/by_demographic_age_range.csv
      hash: md5
      md5: 1c724bf552307f0b61c56ada14375641
      size: 196
    - path: ../src/themes/volunteers/_data/people/by_geo_TOTAL.csv
      hash: md5
      md5: 2a4419ff735c441b55711c6660ae579c
      size: 54
    - path: ../src/themes/volunteers/_data/people/by_geo_oslaua.csv
      hash: md5
      md5: a6eb52172708e090a87f6eebf2eacf25
      size: 741
    - path: ../src/themes/volunteers/_data/people/by_geo_osward.csv
      hash: md5
      md5: a655516d5c0804d04ef93db6f5d2af89
      size: 647
    - path: ../src/themes/volunteers/_data/people/by_geo_postcode_area.csv
      hash: md5
      md5: a3e4505593e9d617ef1cef6b1cde2479
      size: 493
    - path: ../src/themes/volunteers/_data/people/checkpoints_weekly.csv
      hash: md5
      md5: cdb4600838fbb851fb2ffcd5f83c9c64
      size: 1207
    - path: ../src/themes/volunteers/_data/shifts/attended_by_week.csv
      hash: md5
      md5: 57160aa16195f1288eb4e394783286c9
      size: 872
    - path: ../src/themes/volunteers/_data/shifts/attended_cumulative_by_week.csv
      hash: md5
      md5: 3aa66a09de47bb109bd49d32562b2b66
      size: 1047
    - path: ../src/themes/volunteers/_data/shifts/hours_by_week.csv
      hash: md5
      md5: 7ce8745ffe1e1693ecace3ee57aeda06
      size: 1245
    - path: ../src/themes/volunteers/_data/shifts/hours_cumulative_by_week.csv
      hash: md5
      md5: 386d3bb7f6aefec5c70e8c450850290a
      size: 1503
  ticketing:
    cmd: papermill --no-log-output ticketing.ipynb output/ticketing.ipynb
    deps:
    - path: ../data/published/ticketing/orders.csv
      hash: md5
      md5: 06f3e03fc19b95973d724f6017d0cc47
      size: 3510
    - path: ../data/published/ticketing/tickets.csv
      hash: md5
      md5: 2f2df8928939d6a7df4640ac757c2abf
      size: 2582507
    - path: ticketing.ipynb
      hash: md5
      md5: 18c8477182108f103e79a84b4f981d02
      size: 13341
    outs:
    - path: ../src/themes/ticketing/_data/operational
      hash: md5
      md5: 656934494eda47c7112fd4d63fc33e88.dir
      size: 9821
      nfiles: 7
  huq:
    cmd: papermill --no-log-output huq.ipynb output/huq.ipynb
    deps:
    - path: ../data/huq/mastercard.csv
      hash: md5
      md5: e9cb60195f153ef69e1336e7bece6b03
      size: 5386
    - path: huq.ipynb
      hash: md5
      md5: eecff663457e8fc6b5b3a2712cc79b4c
      size: 2506
    outs:
    - path: ../src/experiments/huq/_data/footfall_proxy.csv
      hash: md5
      md5: cc25008789841c4877040a29aea98ca0
      size: 512
    - path: ../src/experiments/huq/_data/spend_index.csv
      hash: md5
      md5: 7954811d3b3eb94a1a70fb764dd7fcad
      size: 512
  events@rise:
    cmd: papermill --no-log-output events.ipynb output/events.ipynb -p spektrix_event_ids
      '4801ANHPDLLRCQPPBDBQTRQJMPNKSLKPJ' -p venue_postcode 'BD1 1LA' -p rosterfy_event_ids
      '25890' -p project_id 'recf4tPyjoXi81NDo' -p id 'rise'
    deps:
    - path: ../data/published/ticketing/
      hash: md5
      md5: a5e04f3a218a210c198a544afedae88b.dir
      size: 2741381
      nfiles: 3
    - path: events.ipynb
      hash: md5
      md5: d607da4680498cd8b5bd0876c1e68b12
      size: 3074
    outs:
    - path: ../src/events/rise/_data/event/
      hash: md5
      md5: 5fa40a9ea36ef750cbeddd0ee144260f.dir
      size: 17421
      nfiles: 6
  events@la-haine:
    cmd: papermill --no-log-output events.ipynb output/events.ipynb -p spektrix_event_ids
      '4001APBPRCSHVVMHTCBMSPSJRNDMCHHLV' -p venue_postcode 'BD1 1JT' -p rosterfy_event_ids
      '26307' -p project_id 'None' -p id 'la-haine'
    deps:
    - path: ../data/published/ticketing/
      hash: md5
      md5: a5e04f3a218a210c198a544afedae88b.dir
      size: 2741381
      nfiles: 3
    - path: events.ipynb
      hash: md5
      md5: d607da4680498cd8b5bd0876c1e68b12
      size: 3074
    outs:
    - path: ../src/events/la-haine/_data/event/
      hash: md5
      md5: 26ddb3a05fcdd54beebda29ab907d739.dir
      size: 6820
      nfiles: 4
  events@les-girafes:
    cmd: papermill --no-log-output events.ipynb output/events.ipynb -p spektrix_event_ids
      'recu2QievPdxr1dnH' -p venue_postcode 'BD1 1LA' -p rosterfy_event_ids '24438'
      -p project_id 'None' -p id 'les-girafes'
    deps:
    - path: ../data/published/ticketing/
      hash: md5
      md5: a5e04f3a218a210c198a544afedae88b.dir
      size: 2741381
      nfiles: 3
    - path: events.ipynb
      hash: md5
      md5: d607da4680498cd8b5bd0876c1e68b12
      size: 3074
    outs:
    - path: ../src/events/les-girafes/_data/event/
      hash: md5
      md5: a2c65636be9b573c5b948ac1fee8f8d5.dir
      size: 215
      nfiles: 4
  sustainability:
    cmd: jupyter execute sustainability.ipynb
    deps:
    - path: ../data/published/sustainability/calculations.csv
      hash: md5
      md5: dcce6519352ab440465413a85cd311d5
      size: 33593
    - path: sustainability.ipynb
      hash: md5
      md5: 1bd13e187287e96b65faba4969e915bf
      size: 3364
    outs:
    - path: ../src/themes/sustainability/_data/calculations/
      hash: md5
      md5: 251b0382d8b850a0d7a11f12cf599556.dir
      size: 174
      nfiles: 2
  events@grue:
    cmd: papermill --no-log-output events.ipynb output/events.ipynb -p spektrix_event_ids
      '7601AHCJPTHNBCVJHLQNKQVKDRKRMLTPC' -p venue_postcode 'None' -p rosterfy_event_ids
      '26540' -p project_id 'recpLG4BaPUSjpEhJ' -p id 'grue'
    deps:
    - path: ../data/published/ticketing/
      hash: md5
      md5: a5e04f3a218a210c198a544afedae88b.dir
      size: 2741381
      nfiles: 3
    - path: events.ipynb
      hash: md5
      md5: d607da4680498cd8b5bd0876c1e68b12
      size: 3074
    outs:
    - path: ../src/events/grue/_data/event/
      hash: md5
      md5: ff3e6dccf56b600331f8b9f476bdca8a.dir
      size: 60364
      nfiles: 6
  dashboards@live:
    cmd: papermill --no-log-output dashboard.ipynb - -p target '' -p start '2025-01-01'
      -p end '2025-12-31' -p fixed_date 'false'
    deps:
    - path: ../data/published/
      hash: md5
      md5: 9c9296052e7d13ab8fc407771b351e30.dir
      size: 3445483
      nfiles: 11
    - path: dashboard.ipynb
      hash: md5
      md5: b70e3d600d90a3c6cfa4e5b4118a61d4
      size: 16050
    outs:
    - path: ../src/insights/dashboard//_data/events.json
      hash: md5
      md5: 054b33ea9ec5307c6b7f190fe292435d
      size: 3184
    - path: ../src/insights/dashboard//_data/tickets.json
      hash: md5
      md5: 09edb2cf727e0e6b46d35dda30410799
      size: 1510
    - path: ../src/insights/dashboard//_data/timestamp.json
      hash: md5
      md5: 81312b465ed62d0221452678592646f5
      size: 69
    - path: ../src/insights/dashboard//_data/volunteers.json
      hash: md5
      md5: 3bdd791f78ff26dea76c78847a5b2b35
      size: 1795
  dashboards@q1:
    cmd: papermill --no-log-output dashboard.ipynb - -p target 'q1' -p start '2025-01-01'
      -p end '2025-03-31' -p fixed_date 'true'
    deps:
    - path: ../data/published/
      hash: md5
      md5: 9c9296052e7d13ab8fc407771b351e30.dir
      size: 3445483
      nfiles: 11
    - path: dashboard.ipynb
      hash: md5
      md5: b70e3d600d90a3c6cfa4e5b4118a61d4
      size: 16050
    outs:
    - path: ../src/insights/dashboard/q1/_data/events.json
      hash: md5
      md5: 9392bcff1a3b9beb69c83966f10427e9
      size: 2890
    - path: ../src/insights/dashboard/q1/_data/tickets.json
      hash: md5
      md5: e96a04437c99a4178a9e20af082f8fb3
      size: 996
    - path: ../src/insights/dashboard/q1/_data/timestamp.json
      hash: md5
      md5: 7eeb1f65b5799b3c6c6ee4ae442981cb
      size: 69
    - path: ../src/insights/dashboard/q1/_data/volunteers.json
      hash: md5
      md5: c0a4c0724935265a0dc66d41faa7e322
      size: 1614
  events@dracula:
    cmd: papermill --no-log-output events.ipynb output/events.ipynb -p spektrix_event_ids
      '9001AGHDBMPJDRPSRMKLRCJGBJJMTQGDH' -p venue_postcode 'None' -p rosterfy_event_ids
      'None' -p project_id 'None' -p id 'dracula'
    deps:
    - path: ../data/published/ticketing/
      hash: md5
      md5: a5e04f3a218a210c198a544afedae88b.dir
      size: 2741381
      nfiles: 3
    - path: events.ipynb
      hash: md5
      md5: d607da4680498cd8b5bd0876c1e68b12
      size: 3074
    outs:
    - path: ../src/events/dracula/_data/event/
      hash: md5
      md5: 9a1ba9a4991d61dc08d6063c14f0b19d.dir
      size: 11244
      nfiles: 3
  dashboards@q2:
    cmd: papermill --no-log-output dashboard.ipynb - -p target 'q2' -p start '2025-04-01'
      -p end '2025-06-30' -p fixed_date 'true'
    deps:
    - path: ../data/published/
      hash: md5
      md5: 9c9296052e7d13ab8fc407771b351e30.dir
      size: 3445483
      nfiles: 11
    - path: dashboard.ipynb
      hash: md5
      md5: b70e3d600d90a3c6cfa4e5b4118a61d4
      size: 16050
    outs:
    - path: ../src/insights/dashboard/q2/_data/events.json
      hash: md5
      md5: 21d0770dc904a1e483f2d32b32299172
      size: 4299
    - path: ../src/insights/dashboard/q2/_data/tickets.json
      hash: md5
      md5: d9883a10031162999f3d0b171e024409
      size: 2815
    - path: ../src/insights/dashboard/q2/_data/timestamp.json
      hash: md5
      md5: 21a8afa82c160ff2a86deeebff16a804
      size: 69
    - path: ../src/insights/dashboard/q2/_data/volunteers.json
      hash: md5
      md5: 2d9fac85c741822303ed0646ab0ac8d6
      size: 577
  dashboards@all:
    cmd: papermill --no-log-output dashboard.ipynb - -p target 'all' -p start '2024-01-01'
      -p end '2025-12-31' -p fixed_date 'false'
    deps:
    - path: ../data/published/
      hash: md5
      md5: 9c9296052e7d13ab8fc407771b351e30.dir
      size: 3445483
      nfiles: 11
    - path: dashboard.ipynb
      hash: md5
      md5: b70e3d600d90a3c6cfa4e5b4118a61d4
      size: 16050
    outs:
    - path: ../src/insights/dashboard/all/_data/events.json
      hash: md5
      md5: ed4598c7eae10b8916fc656a3f2687cb
      size: 3540
    - path: ../src/insights/dashboard/all/_data/tickets.json
      hash: md5
      md5: 0c0e52d70ac8dfec45d09ece8106f41c
      size: 1510
    - path: ../src/insights/dashboard/all/_data/timestamp.json
      hash: md5
      md5: f309ebcb70496a78bd3e575b1cb985ab
      size: 69
    - path: ../src/insights/dashboard/all/_data/volunteers.json
      hash: md5
      md5: 13b52b4c663aad40969bba678f233a3a
      size: 2223
  programme:
    cmd: jupyter execute programme.ipynb
    deps:
    - path: ../data/published/programme/events.csv
      hash: md5
      md5: 8948b29c2436c6ce87fc2c8de168c183
      size: 576891
    - path: programme.ipynb
      hash: md5
      md5: d361634e0ddcab13fb34ef9d8cc9182e
      size: 3621
    outs:
    - path: ../src/themes/programme/_data/events/
      hash: md5
      md5: ea1c78f0db2eb41d4606132a4b51f5b5.dir
      size: 3624
      nfiles: 4
