schema: '2.0'
stages:
  volunteers:
    cmd: papermill --no-log-output volunteers.ipynb output/volunteers.ipynb
    deps:
    - path: ../data/published/volunteers/checkpoints.csv
      hash: md5
      md5: 03e95dfa261cd0ea4233f17a495d71a4
      size: 17439
    - path: ../data/published/volunteers/shifts.csv
      hash: md5
      md5: 27ff958a51f056e144f96a2d3ab959eb
      size: 19650
    - path: volunteers.ipynb
      hash: md5
      md5: 6becaebc8f5c7e0d74d6c069fa557984
      size: 8459
    outs:
    - path: ../src/themes/volunteers/_data/people/by_demographic_age_range.csv
      hash: md5
      md5: dee5381ea0076113aae5fcdc8184a136
      size: 196
    - path: ../src/themes/volunteers/_data/people/by_geo_TOTAL.csv
      hash: md5
      md5: 9fd7c0f111871c28268d6aa41409eb87
      size: 54
    - path: ../src/themes/volunteers/_data/people/by_geo_oslaua.csv
      hash: md5
      md5: d14b855845ec2d8acbb7a7e1b8f4a4cd
      size: 740
    - path: ../src/themes/volunteers/_data/people/by_geo_osward.csv
      hash: md5
      md5: eb149febe1f5143b43682cbe5f0a19bc
      size: 644
    - path: ../src/themes/volunteers/_data/people/by_geo_postcode_area.csv
      hash: md5
      md5: ea2bf396e9da857d300854cda314d3aa
      size: 491
    - path: ../src/themes/volunteers/_data/people/checkpoints_weekly.csv
      hash: md5
      md5: 53682bf0c593f0386631b8357c4ee560
      size: 1034
    - path: ../src/themes/volunteers/_data/shifts/attended_by_week.csv
      hash: md5
      md5: 9afe8da5af28d9c0993a8513c234359f
      size: 747
    - path: ../src/themes/volunteers/_data/shifts/attended_cumulative_by_week.csv
      hash: md5
      md5: 21a43c90b8c2b3d1a9f9e7b8b82dda64
      size: 891
    - path: ../src/themes/volunteers/_data/shifts/hours_by_week.csv
      hash: md5
      md5: 2fb138ce2774eedf4eb501fa4a01b0e6
      size: 1064
    - path: ../src/themes/volunteers/_data/shifts/hours_cumulative_by_week.csv
      hash: md5
      md5: c31ff0d36841a5a59b3fc003a3dbca6e
      size: 1305
  ticketing:
    cmd: papermill --no-log-output ticketing.ipynb output/ticketing.ipynb
    deps:
    - path: ../data/published/ticketing/orders.csv
      hash: md5
      md5: 1c2fd08ab042efb974cf6a9db61895d8
      size: 2930
    - path: ../data/published/ticketing/tickets.csv
      hash: md5
      md5: 256609eedb638e73986f39a09f246958
      size: 1830977
    - path: ticketing.ipynb
      hash: md5
      md5: 18c8477182108f103e79a84b4f981d02
      size: 13341
    outs:
    - path: ../src/themes/ticketing/_data/operational
      hash: md5
      md5: 9e07494b810f234d4e7b509a293c83e1.dir
      size: 8833
      nfiles: 7
  huq:
    cmd: papermill --no-log-output huq.ipynb output/huq.ipynb
    deps:
    - path: ../data/huq/mastercard.csv
      hash: md5
      md5: e9cb60195f153ef69e1336e7bece6b03
      size: 5386
    - path: huq.ipynb
      hash: md5
      md5: eecff663457e8fc6b5b3a2712cc79b4c
      size: 2506
    outs:
    - path: ../src/experiments/huq/_data/footfall_proxy.csv
      hash: md5
      md5: cc25008789841c4877040a29aea98ca0
      size: 512
    - path: ../src/experiments/huq/_data/spend_index.csv
      hash: md5
      md5: 7954811d3b3eb94a1a70fb764dd7fcad
      size: 512
  events@rise:
    cmd: papermill --no-log-output events.ipynb output/events.ipynb -p spektrix_event_ids
      '4801ANHPDLLRCQPPBDBQTRQJMPNKSLKPJ' -p venue_postcode 'BD1 1LA' -p rosterfy_event_ids
      '25890' -p project_id 'recf4tPyjoXi81NDo' -p id 'rise'
    deps:
    - path: ../data/published/ticketing/
      hash: md5
      md5: 800a4edadf2abecbeccc6c47c11a1eb0.dir
      size: 2090297
      nfiles: 3
    - path: events.ipynb
      hash: md5
      md5: d607da4680498cd8b5bd0876c1e68b12
      size: 3074
    outs:
    - path: ../src/events/rise/_data/event/
      hash: md5
      md5: b5d3f719e6de4f2ae77459152abf86e0.dir
      size: 17236
      nfiles: 6
  events@la-haine:
    cmd: papermill --no-log-output events.ipynb output/events.ipynb -p spektrix_event_ids
      '4001APBPRCSHVVMHTCBMSPSJRNDMCHHLV' -p venue_postcode 'BD1 1JT' -p rosterfy_event_ids
      '26307' -p project_id 'None' -p id 'la-haine'
    deps:
    - path: ../data/published/ticketing/
      hash: md5
      md5: 800a4edadf2abecbeccc6c47c11a1eb0.dir
      size: 2090297
      nfiles: 3
    - path: events.ipynb
      hash: md5
      md5: d607da4680498cd8b5bd0876c1e68b12
      size: 3074
    outs:
    - path: ../src/events/la-haine/_data/event/
      hash: md5
      md5: 26ddb3a05fcdd54beebda29ab907d739.dir
      size: 6820
      nfiles: 4
  events@les-girafes:
    cmd: papermill --no-log-output events.ipynb output/events.ipynb -p spektrix_event_ids
      'recu2QievPdxr1dnH' -p venue_postcode 'BD1 1LA' -p rosterfy_event_ids '24438'
      -p project_id 'None' -p id 'les-girafes'
    deps:
    - path: ../data/published/ticketing/
      hash: md5
      md5: 800a4edadf2abecbeccc6c47c11a1eb0.dir
      size: 2090297
      nfiles: 3
    - path: events.ipynb
      hash: md5
      md5: d607da4680498cd8b5bd0876c1e68b12
      size: 3074
    outs:
    - path: ../src/events/les-girafes/_data/event/
      hash: md5
      md5: a2c65636be9b573c5b948ac1fee8f8d5.dir
      size: 215
      nfiles: 4
  sustainability:
    cmd: jupyter execute sustainability.ipynb
    deps:
    - path: ../data/published/sustainability/calculations.csv
      hash: md5
      md5: c08c9acb2ad97b81d42461fe68d37719
      size: 32933
    - path: sustainability.ipynb
      hash: md5
      md5: 1bd13e187287e96b65faba4969e915bf
      size: 3364
    outs:
    - path: ../src/themes/sustainability/_data/calculations/
      hash: md5
      md5: 00f4482977cf9cc90e4b3e295747f157.dir
      size: 160
      nfiles: 2
  events@grue:
    cmd: papermill --no-log-output events.ipynb output/events.ipynb -p spektrix_event_ids
      '7601AHCJPTHNBCVJHLQNKQVKDRKRMLTPC' -p venue_postcode 'None' -p rosterfy_event_ids
      '26540' -p project_id 'recpLG4BaPUSjpEhJ' -p id 'grue'
    deps:
    - path: ../data/published/ticketing/
      hash: md5
      md5: 800a4edadf2abecbeccc6c47c11a1eb0.dir
      size: 2090297
      nfiles: 3
    - path: events.ipynb
      hash: md5
      md5: d607da4680498cd8b5bd0876c1e68b12
      size: 3074
    outs:
    - path: ../src/events/grue/_data/event/
      hash: md5
      md5: ff3e6dccf56b600331f8b9f476bdca8a.dir
      size: 60364
      nfiles: 6
  dashboards@live:
    cmd: papermill --no-log-output dashboard.ipynb - -p target '' -p start '2025-01-01'
      -p end '2025-12-31' -p fixed_date 'false'
    deps:
    - path: ../data/published/
      hash: md5
      md5: fa8ad7ee148a86052a7e70ce36b4dbf7.dir
      size: 2366978
      nfiles: 9
    - path: dashboard.ipynb
      hash: md5
      md5: 8661647a49f6e107f07478695f5936af
      size: 7980
    outs:
    - path: ../src/insights/dashboard//_data/
      hash: md5
      md5: 1e83c49613054a93fb8b244a28551120.dir
      size: 4536
      nfiles: 24
  dashboards@q1:
    cmd: papermill --no-log-output dashboard.ipynb - -p target 'q1' -p start '2025-01-01'
      -p end '2025-03-31' -p fixed_date 'true'
    deps:
    - path: ../data/published/
      hash: md5
      md5: fa8ad7ee148a86052a7e70ce36b4dbf7.dir
      size: 2366978
      nfiles: 9
    - path: dashboard.ipynb
      hash: md5
      md5: 8661647a49f6e107f07478695f5936af
      size: 7980
    outs:
    - path: ../src/insights/dashboard/q1/_data/
      hash: md5
      md5: 99a14dfd85647824f8c31a2b7af29511.dir
      size: 2777
      nfiles: 4
